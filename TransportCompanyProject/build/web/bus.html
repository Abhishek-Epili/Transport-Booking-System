<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<html>
    <head>
        <title>Bus Ticket-Booking</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styling.css">
        <script>
            function calculate(){
                var source = Number(document.getElementById("source").value);
                var end = Number(document.getElementById("destination").value);
                var diff = end - source;
                var price=0;
                if(diff<0){
                    diff=diff*-1;
                }
                if(diff==0){
                    return;
                }
                else if(diff<=3){
                    price=5;
                }
                else if(diff>3 && diff<=6){
                    price=10;
                }
                else if(diff>6 && diff<=9){
                    price=15;
                }
                else{
                    price=20;
                }
                
                var person = Number(document.getElementById("person").value);
                if(person!=null){
                    if(person<0){
                        return;
                    }
                    else{
                        price = price*person;
                    }
                }
                
                var comp = document.querySelector('input[name="compartment"]:checked');   
                if(comp!=null){
                    if(comp.value=="AC"){
                        price=price*2;
                    }
                    else{
                        price=price*1;
                    }
                }
                
                document.getElementById("price").innerHTML=price+"rs";
                document.getElementById("hidden_price").value=price+"rs";
                var s = document.getElementById("source");
                var s2= s.options[s.selectedIndex].text;
                document.getElementById("hidden_source").value=s2;
                var e = document.getElementById("destination");
                var e2= e.options[e.selectedIndex].text;
                document.getElementById("hidden_end").value=e2;
            }
        </script>
    </head>
    <body>
        <h1>Ticket Booking for Bus</h1>
        <h3>Note: You can only book the ticket for today itself!</h3>
        <form action="transport">
            <input type="hidden" value="Page3" name="page">
            <input type="hidden" name="hidden_price" id="hidden_price">
            <input type="hidden" name="hidden_source" id="hidden_source">
            <input type="hidden" name="hidden_end" id="hidden_end">
            <table>
                <tr>
                    <td>Select Source</td>
                    <td>
                        <select id="source" name="source" onchange="calculate()">
                            <option value="1">Thane</option>
                            <option value="2">Mulund</option>
                            <option value="3">Bhandup</option>
                            <option value="4">Kanjur Marg</option>
                            <option value="5">Ghatkopar</option>
                            <option value="6">Kurla</option>
                            <option value="7">Matunga</option>
                            <option value="8">Dadar</option>
                            <option value="9">Chichpokli</option>
                            <option value="10">Byculla</option>
                            <option value="11">CSMT</option>  
                        </select> 
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td>Select Destination</td>
                    <td>
                        <select id="destination" name="destination" onchange="calculate()">
                            <option value="1">Thane</option>
                            <option value="2">Mulund</option>
                            <option value="3">Bhandup</option>
                            <option value="4">Kanjur Marg</option>
                            <option value="5">Ghatkopar</option>
                            <option value="6">Kurla</option>
                            <option value="7">Matunga</option>
                            <option value="8">Dadar</option>
                            <option value="9">Chichpokli</option>
                            <option value="10">Byculla</option>
                            <option value="11">CSMT</option> 
                        </select> 
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        Enter No.of Person
                    </td>
                    <td>
                        <input type="number" 
                               onchange="calculate()" 
                               onkeypress = "this.onchange();"
                               onpaste    = "this.onchange();"
                               oninput    = "this.onchange();" 
                               id="person" 
                               name="person"
                               >
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        Select compartment
                    </td>
                    <td>
                        <input type="radio" name="compartment" id="normal" onchange="calculate()" value="normal" checked>
                        Normal
                        <input type="radio" name="compartment" id="AC" onchange="calculate()" value="AC">
                        AC
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        Total price of ticket
                    </td>
                    <td>
                        <div id="price" style="font-weight: bold;"></div>
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" value="Search Buses"></td>
                </tr>
            </table>
        </form>
    </body>
</html>
